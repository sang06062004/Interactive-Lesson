<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Bài giảng tương tác — Bài 3</title>
  <style>
    :root {
      --bg:#f7f9fc; --card:#fff; --accent:#0b66ff; --muted:#6b7280;
    }
    *{box-sizing:border-box;}
    body {
      margin:0;
      font-family:Inter,system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif;
      background:var(--bg);
      color:#111;
      padding:24px;
      -webkit-font-smoothing:antialiased;
    }
    .container {
      max-width:1100px;
      margin:0 auto;
      background:var(--card);
      padding:16px;
      border-radius:12px;
      box-shadow:0 2px 8px rgba(0,0,0,0.05);
    }
    header {
      border-bottom:1px solid #e5e7eb;
      padding-bottom:12px;
      margin-bottom:16px;
    }
    header h1 {margin:0;font-size:20px;}
    header p {margin:6px 0 0;color:var(--muted);font-size:14px;}
    .iframe-wrap {
      position:relative;
      width:100%;
      padding-top:56.25%;
      background:#000;
      border-radius:10px;
      overflow:hidden;
    }
    iframe {
      position:absolute;
      top:0;left:0;
      width:100%;height:100%;
      border:0;
      background:#000;
    }
    footer {
      margin-top:12px;
      text-align:center;
      color:var(--muted);
      font-size:13px;
    }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <h1>Bài giảng tương tác — Bài 3: Giới thiệu về Khoa học dữ liệu (tiếp theo)</h1>
    </header>
    <div class="iframe-wrap">
      <!-- === H5P EMBED START === -->
      <iframe src="https://h5p.org/h5p/embed/1547841" 
        width="1091" 
        height="677" 
        frameborder="0" 
        allowfullscreen="allowfullscreen" 
        allow="geolocation *; microphone *; camera *; midi *; encrypted-media *" 
        title="Bài giảng tương tác bài 3"></iframe>
      <!-- === H5P EMBED END === -->
    </div>
    <footer>
      © 2025 — Nhóm 8 — Chủ đề F <sup>CS</sup> — Bài 3: Giới thiệu về Khoa học dữ liệu (tiếp theo)
    </footer>
  </div>
  <script src="https://h5p.org/sites/all/modules/h5p/library/js/h5p-resizer.js" charset="UTF-8"></script>
  <script>
    // Nếu H5P gửi postMessage khi hoàn thành, wrapper có thể đánh dấu SCORM complete.
    window.addEventListener('message', (event) => {
      const msg = event.data;
      if (msg === 'h5p-complete' || (msg && msg.type === 'h5p-complete')) {
        trySetScormComplete();
      }
    });
    function trySetScormComplete() {
      console.log('Đang cố gắng gửi trạng thái "hoàn thành" tới SCORM API...');
      try {
        function findAPI(win) {
          if (!win) return null;
          try {
            if (win.API) return win.API;
          } catch(e){}
          if (win.parent && win.parent !== win) return findAPI(win.parent);
          return null;
        }
        const api = findAPI(window);
        if (api && typeof api.LMSInitialize === 'function') {
          api.LMSInitialize('');
          api.LMSSetValue('cmi.core.lesson_status', 'completed');
          api.LMSCommit('');
          api.LMSFinish('');
          console.log('✅ SCORM đánh dấu hoàn thành.');
        } else {
          console.warn('⚠️ Không tìm thấy SCORM API — đang chạy ngoài Moodle hoặc SCORM Player.');
        }
      } catch (err) {
        console.error('❌ Lỗi khi cập nhật SCORM:', err);
      }
    }
  </script>
</body>
</html>